<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PrÃ¡ctica de Hiragana y Katakana</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-500 to-purple-600 min-h-screen flex items-center justify-center">
  <div class="bg-white p-8 rounded-lg shadow-lg w-96 text-center">
    <h1 class="text-2xl font-bold text-gray-800 mb-4">ğŸ“– Aprende Hiragana y Katakana</h1>
    <p class="text-lg text-gray-600 mb-2">Nivel: <span id="level" class="font-bold">1</span></p>
    <p class="text-lg text-gray-600 mb-6">Puntaje: <span id="score" class="font-bold">0</span></p>

    <!-- CarÃ¡cter japonÃ©s -->
    <div class="text-6xl font-bold text-purple-700 mb-4 animate-bounce" id="currentChar">
      ã‚
    </div>

    <!-- Input para responder -->
    <input 
      type="text" 
      placeholder="Escribe la lectura..." 
      class="border-2 border-gray-300 rounded-lg w-full p-3 text-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
      id="answerInput"
    />

    <!-- Botones -->
    <div class="mt-6 space-y-3">
      <button 
        class="bg-purple-500 text-white w-full py-3 rounded-lg hover:bg-purple-600 transition"
        onclick="checkAnswer()"
      >
        Comprobar
      </button>
      <button 
        class="bg-gray-300 text-gray-700 w-full py-3 rounded-lg hover:bg-gray-400 transition"
        onclick="nextQuestion()"
      >
        Siguiente
      </button>
    </div>

    <!-- Resultado -->
    <div id="result" class="mt-6 text-lg font-bold"></div>

    <!-- Nivel Up Notification -->
    <div id="levelUp" class="hidden text-xl font-bold text-yellow-500 mt-4 animate-pulse">
      ğŸ‰ Â¡Subiste de nivel! ğŸ‰
    </div>
  </div>

  <script>
    // Lista de caracteres (hiragana + katakana)
    const characters = [
      { char: "ã‚", answer: "a" }, { char: "ã„", answer: "i" }, { char: "ã†", answer: "u" },
      { char: "ãˆ", answer: "e" }, { char: "ãŠ", answer: "o" },
      { char: "ã‹", answer: "ka" }, { char: "ã", answer: "ki" }, { char: "ã", answer: "ku" },
      { char: "ã‘", answer: "ke" }, { char: "ã“", answer: "ko" },
      { char: "ã•", answer: "sa" }, { char: "ã—", answer: "shi" }, { char: "ã™", answer: "su" },
      { char: "ã›", answer: "se" }, { char: "ã", answer: "so" },
      { char: "ãŸ", answer: "ta" }, { char: "ã¡", answer: "chi" }, { char: "ã¤", answer: "tsu" },
      { char: "ã¦", answer: "te" }, { char: "ã¨", answer: "to" },
      { char: "ãª", answer: "na" }, { char: "ã«", answer: "ni" }, { char: "ã¬", answer: "nu" },
      { char: "ã­", answer: "ne" }, { char: "ã®", answer: "no" },
      { char: "ã¯", answer: "ha" }, { char: "ã²", answer: "hi" }, { char: "ãµ", answer: "fu" },
      { char: "ã¸", answer: "he" }, { char: "ã»", answer: "ho" },
      { char: "ã¾", answer: "ma" }, { char: "ã¿", answer: "mi" }, { char: "ã‚€", answer: "mu" },
      { char: "ã‚", answer: "me" }, { char: "ã‚‚", answer: "mo" },
      { char: "ã‚„", answer: "ya" }, { char: "ã‚†", answer: "yu" }, { char: "ã‚ˆ", answer: "yo" },
      { char: "ã‚‰", answer: "ra" }, { char: "ã‚Š", answer: "ri" }, { char: "ã‚‹", answer: "ru" },
      { char: "ã‚Œ", answer: "re" }, { char: "ã‚", answer: "ro" },
      { char: "ã‚", answer: "wa" }, { char: "ã‚’", answer: "wo" }, { char: "ã‚“", answer: "n" },
      { char: "ã‚¢", answer: "a" }, { char: "ã‚¤", answer: "i" }, { char: "ã‚¦", answer: "u" },
      { char: "ã‚¨", answer: "e" }, { char: "ã‚ª", answer: "o" },
      { char: "ã‚«", answer: "ka" }, { char: "ã‚­", answer: "ki" }, { char: "ã‚¯", answer: "ku" },
      { char: "ã‚±", answer: "ke" }, { char: "ã‚³", answer: "ko" },
      { char: "ã‚µ", answer: "sa" }, { char: "ã‚·", answer: "shi" }, { char: "ã‚¹", answer: "su" },
      { char: "ã‚»", answer: "se" }, { char: "ã‚½", answer: "so" },
      { char: "ã‚¿", answer: "ta" }, { char: "ãƒ", answer: "chi" }, { char: "ãƒ„", answer: "tsu" },
      { char: "ãƒ†", answer: "te" }, { char: "ãƒˆ", answer: "to" },
      { char: "ãƒŠ", answer: "na" }, { char: "ãƒ‹", answer: "ni" }, { char: "ãƒŒ", answer: "nu" },
      { char: "ãƒ", answer: "ne" }, { char: "ãƒ", answer: "no" },
      { char: "ãƒ", answer: "ha" }, { char: "ãƒ’", answer: "hi" }, { char: "ãƒ•", answer: "fu" },
      { char: "ãƒ˜", answer: "he" }, { char: "ãƒ›", answer: "ho" },
      { char: "ãƒ", answer: "ma" }, { char: "ãƒŸ", answer: "mi" }, { char: "ãƒ ", answer: "mu" },
      { char: "ãƒ¡", answer: "me" }, { char: "ãƒ¢", answer: "mo" },
      { char: "ãƒ¤", answer: "ya" }, { char: "ãƒ¦", answer: "yu" }, { char: "ãƒ¨", answer: "yo" },
      { char: "ãƒ©", answer: "ra" }, { char: "ãƒª", answer: "ri" }, { char: "ãƒ«", answer: "ru" },
      { char: "ãƒ¬", answer: "re" }, { char: "ãƒ­", answer: "ro" },
      { char: "ãƒ¯", answer: "wa" }, { char: "ãƒ²", answer: "wo" }, { char: "ãƒ³", answer: "n" },
    ];

    let currentIndex = 0;
    let score = 0;
    let level = 1;

    async function checkAnswer() {
      const userAnswer = document.getElementById("answerInput").value.trim().toLowerCase();
      const character = characters[currentIndex].char;
      const result = document.getElementById("result");

      try {
        // Enviar la solicitud POST a la API
        const response = await fetch('/api/submitAnswer', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ character, userAnswer })
        });

        const data = await response.json();

        if (data.correct) {
          score++;
          result.textContent = "âœ… Â¡Correcto!";
          result.classList.add("text-green-600");
          result.classList.remove("text-red-600");

          // Nivel Up cada 10 puntos
          if (score % 10 === 0) {
            level++;
            document.getElementById("level").textContent = level;
            const levelUp = document.getElementById("levelUp");
            levelUp.classList.remove("hidden");
            setTimeout(() => levelUp.classList.add("hidden"), 2000);
          }
        } else {
          result.textContent = `âŒ Incorrecto. La respuesta es "${characters[currentIndex].answer}".`;
          result.classList.add("text-red-600");
          result.classList.remove("text-green-600");
        }

        document.getElementById("score").textContent = score;
      } catch (error) {
        result.textContent = "âŒ Error al verificar la respuesta. Intenta nuevamente.";
        result.classList.add("text-red-600");
        result.classList.remove("text-green-600");
      }
    }

    function nextQuestion() {
      currentIndex = Math.floor(Math.random() * characters.length);
      document.getElementById("answerInput").value = "";
      document.getElementById("result").textContent = "";
      document.getElementById("currentChar").textContent = characters[currentIndex].char;
    }
  </script>
</body>
</html>
